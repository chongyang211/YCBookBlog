# 07.UIViewControllerè®¾è®¡
#### ç›®å½•ä»‹ç»
- 01.UIViewController
  - 1.1 Controllerä»‹ç»
  - 1.2 ControlleråŠŸèƒ½
- 02.Controllerä¸»è¦èŒè´£
  - 2.1 æ ¸å¿ƒèŒè´£è¯´æ˜
  - 2.2 æ ¸å¿ƒç›¸å…³ç±»è¯´æ˜
  - 2.3 UINavigationController
- 03.Controllerç”Ÿå‘½å‘¨æœŸ
  - 3.1 åˆå§‹åŒ–æ–¹æ³•
  - 3.2 åŠ è½½è§†å›¾æ–¹æ³•
  - 3.3 è§†å›¾å‡ºç°ä¸æ¶ˆå¤±
  - 3.4 è§†å›¾åŠ è½½æ—¶æœº
  - 3.5 çŠ¶æ€å˜åŒ–å¤„ç†
  - 3.6 ç³»ç»Ÿäº‹ä»¶å“åº”
  - 3.7 ä»£ç å¼€å‘å»ºè®®
- 04.Controllerå†…ç½®å±æ€§
  - 4.1 ä¸»è¦çš„å±æ€§
  - 4.2 å±æ€§è®¾ç½®å®è·µ
- 05.Controllerå¯¼èˆªæ–¹æ³•
  - 5.1 åµŒå…¥ä¸å¼¹å‡º
  - 5.2 æ¨é€ä¸å¼¹å‡º
  - 5.3 æºå¸¦å‚æ•°å¹¶å›è°ƒ
- 06.è§†å›¾å±‚æ¬¡ç®¡ç†æ„å»º
  - 6.1 å­è§†å›¾æ·»åŠ &ç§»é™¤
  - 6.2 è§†å›¾å±‚æ¬¡å¸ƒå±€ä¸çº¦æŸ
  - 6.3 æ§ä»¶æ·»åŠ ä¸å¸ƒå±€
  - 6.4 æ•°æ®ç»‘å®šUI
- 07.æ‰‹åŠ¿è¯†åˆ«å™¨åº”ç”¨
  - 7.1 æ‰‹åŠ¿è¯†åˆ«å™¨çš„ç±»å‹
  - 7.2 æ‰‹åŠ¿ä¸è§†å›¾äº¤äº’
- 08.æ§åˆ¶å™¨é«˜çº§åº”ç”¨
  - 8.1 æ¨¡æ€å±•ç¤ºä¸è§£é™¤
  - 8.2 è§†å›¾çŠ¶æ€ä¿å­˜ä¸æ¢å¤
  - 8.3 UINavigationController
  - 8.4 è§†å›¾åˆ‡æ¢åŠ¨ç”»ç¤ºä¾‹

## 01.UIViewController

### 1.1 Controllerä»‹ç»

UIViewControlleræ˜¯iOSå¼€å‘ä¸­çš„ä¸€ä¸ªé‡è¦ç±»ï¼Œç”¨äºç®¡ç†åº”ç”¨ç¨‹åºçš„ç”¨æˆ·ç•Œé¢ã€‚å®ƒæ˜¯UIKitæ¡†æ¶ä¸­çš„ä¸€éƒ¨åˆ†ï¼Œç”¨äºåˆ›å»ºå’Œç®¡ç†è§†å›¾å±‚æ¬¡ç»“æ„ã€å¤„ç†ç”¨æˆ·äº¤äº’ä»¥åŠå“åº”ç³»ç»Ÿäº‹ä»¶ã€‚

UIViewControllerè´Ÿè´£ç®¡ç†ä¸€ä¸ªå±å¹•ä¸Šçš„è§†å›¾ï¼Œå¹¶å¤„ç†ä¸è¯¥è§†å›¾ç›¸å…³çš„é€»è¾‘ã€‚å®ƒå¯ä»¥åŒ…å«å…¶ä»–è§†å›¾æ§åˆ¶å™¨ï¼Œå½¢æˆè§†å›¾æ§åˆ¶å™¨å±‚æ¬¡ç»“æ„ã€‚

### 1.2 ControlleråŠŸèƒ½

ä»¥ä¸‹æ˜¯UIViewControllerçš„ä¸€äº›å¸¸è§åŠŸèƒ½å’Œç”¨é€”ï¼š

1. è§†å›¾ç®¡ç†ï¼šUIViewControllerè´Ÿè´£åŠ è½½å’Œç®¡ç†è§†å›¾å±‚æ¬¡ç»“æ„ã€‚å®ƒå¯ä»¥åˆ›å»ºå’Œé…ç½®è§†å›¾ï¼Œå°†è§†å›¾æ·»åŠ åˆ°å±å¹•ä¸Šï¼Œå¹¶å¤„ç†è§†å›¾çš„å¸ƒå±€å’Œæ˜¾ç¤ºã€‚
2. ç”¨æˆ·äº¤äº’ï¼šUIViewControllerå¯ä»¥å¤„ç†ç”¨æˆ·çš„è¾“å…¥å’Œäº¤äº’ã€‚å®ƒå¯ä»¥å“åº”æŒ‰é’®ç‚¹å‡»ã€æ‰‹åŠ¿æ“ä½œã€æ–‡æœ¬è¾“å…¥ç­‰ç”¨æˆ·äº‹ä»¶ï¼Œå¹¶æ‰§è¡Œç›¸åº”çš„æ“ä½œã€‚
3. æ•°æ®ä¼ é€’ï¼šUIViewControllerå¯ä»¥æ¥æ”¶å’Œä¼ é€’æ•°æ®ã€‚å®ƒå¯ä»¥ä»å…¶ä»–è§†å›¾æ§åˆ¶å™¨è·å–æ•°æ®ï¼Œå¹¶å°†æ•°æ®ä¼ é€’ç»™å…¶ä»–è§†å›¾æ§åˆ¶å™¨æˆ–æ¨¡å‹å¯¹è±¡ã€‚
4. ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼šUIViewControllerå…·æœ‰ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œç”¨äºç®¡ç†è§†å›¾æ§åˆ¶å™¨çš„åˆ›å»ºã€åŠ è½½ã€æ˜¾ç¤ºå’Œé”€æ¯è¿‡ç¨‹ã€‚é€šè¿‡è¿™äº›æ–¹æ³•ï¼Œæ‚¨å¯ä»¥æ‰§è¡Œé€‚å½“çš„åˆå§‹åŒ–ã€é…ç½®å’Œæ¸…ç†æ“ä½œã€‚
5. å¯¼èˆªå’Œè½¬åœºï¼šUIViewControllerå¯ä»¥ä¸å¯¼èˆªæ§åˆ¶å™¨ã€æ ‡ç­¾æ æ§åˆ¶å™¨ç­‰å®¹å™¨æ§åˆ¶å™¨ä¸€èµ·ä½¿ç”¨ï¼Œä»¥å®ç°åº”ç”¨ç¨‹åºçš„å¯¼èˆªå’Œè§†å›¾åˆ‡æ¢ã€‚
6. çŠ¶æ€ä¿å­˜å’Œæ¢å¤ï¼šUIViewControlleræ”¯æŒåº”ç”¨ç¨‹åºçš„çŠ¶æ€ä¿å­˜å’Œæ¢å¤ã€‚å®ƒå¯ä»¥ä¿å­˜å’Œæ¢å¤è§†å›¾æ§åˆ¶å™¨çš„çŠ¶æ€ï¼Œä»¥ä¾¿åœ¨åº”ç”¨ç¨‹åºé‡æ–°å¯åŠ¨åæ¢å¤åˆ°ä¹‹å‰çš„çŠ¶æ€ã€‚

UIViewControlleræ˜¯iOSåº”ç”¨ç¨‹åºå¼€å‘ä¸­çš„æ ¸å¿ƒæ¦‚å¿µä¹‹ä¸€ï¼Œå®ƒæä¾›äº†ä¸°å¯Œçš„åŠŸèƒ½å’Œçµæ´»æ€§ï¼Œç”¨äºæ„å»ºäº¤äº’å¼å’Œå“åº”å¼çš„ç”¨æˆ·ç•Œé¢ã€‚

## 02.Controllerä¸»è¦èŒè´£
### 2.1 æ ¸å¿ƒèŒè´£è¯´æ˜

ç±» UIViewController æ˜¯è§†å›¾æ§åˆ¶å™¨å±‚æ¬¡ç»“æ„çš„åŸºç±»ã€‚è§†å›¾æ§åˆ¶å™¨ç®¡ç† UIViewå’Œå…¶ä»– UIViewControllerã€‚iOS åº”ç”¨ç¨‹åºå…·æœ‰å•ä¸ªçª—å£ï¼Œä½†å¤šä¸ªå±å¹•ï¼Œæ¯ä¸ªå±å¹•å¯èƒ½åŒ…å«å¤šä¸ª UIViewã€‚ç®¡ç†è¿™äº›å±å¹•å¾ˆå¤æ‚ï¼Œéœ€è¦å“åº”ç”¨æˆ·è¾“å…¥å’Œæ¨¡å‹ä¸­çš„æ›´æ”¹ï¼Œ (é—®é¢˜åŸŸ) ã€‚è¿™ç§ç®¡ç†å’Œåè°ƒæ˜¯ çš„å·¥ä½œ UIViewControllerã€‚

UIViewController æœ‰ 3 ä¸ªä¸»è¦èŒè´£ï¼š

1. å¸ƒå±€å‡ºå…¶ç»„ä»¶ UIViewã€‚ è¿™åŒ…æ‹¬è°ƒæ•´å¤§å°ã€å“åº”æ–¹å‘æ›´æ”¹ç­‰ã€‚
2. è°ƒæ•´æ˜¾ç¤ºç»“æ„ä»¥å“åº”è¾“å…¥äº‹ä»¶æˆ–æ¨¡å‹ç±»çš„çŠ¶æ€
3. å°†ç”¨æˆ·è¾“å…¥è½¬æ¢ä¸ºä¸å¹³å°æ— å…³çš„æ¨¡å‹æœåŠ¡è¯·æ±‚

### 2.2 æ ¸å¿ƒç›¸å…³ç±»è¯´æ˜

ä»¥ä¸‹æ˜¯ä¸€äº›ä¸UIViewControlleræ§åˆ¶å™¨å¯†åˆ‡ç›¸å…³çš„æ ¸å¿ƒç±»çš„è¯´æ˜ï¼š

1. UINavigationController æ˜¯ä¸€ä¸ªå¯¼èˆªæ§åˆ¶å™¨ç±»ï¼Œç”¨äºç®¡ç†è§†å›¾æ§åˆ¶å™¨çš„å¯¼èˆªå †æ ˆã€‚å®ƒæä¾›äº†å¯¼èˆªæ å’Œå¯¼èˆªæ æ§åˆ¶æŒ‰é’®ï¼Œä»¥ä¾¿ç”¨æˆ·å¯ä»¥åœ¨è§†å›¾æ§åˆ¶å™¨ä¹‹é—´è¿›è¡Œæ¨å…¥ï¼ˆpushï¼‰å’Œå¼¹å‡ºï¼ˆpopï¼‰æ“ä½œã€‚
2. UITabBarController æ˜¯ä¸€ä¸ªæ ‡ç­¾æ æ§åˆ¶å™¨ç±»ï¼Œç”¨äºç®¡ç†å…·æœ‰å¤šä¸ªæ ‡ç­¾é¡µçš„ç•Œé¢ã€‚å®ƒæä¾›äº†ä¸€ä¸ªæ ‡ç­¾æ ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡ç‚¹å‡»æ ‡ç­¾åˆ‡æ¢ä¸åŒçš„è§†å›¾æ§åˆ¶å™¨ã€‚
3. UIPageViewController æ˜¯ä¸€ä¸ªåˆ†é¡µæ§åˆ¶å™¨ç±»ï¼Œç”¨äºç®¡ç†å…·æœ‰å¤šä¸ªé¡µé¢çš„ç•Œé¢ã€‚å®ƒæä¾›äº†æ°´å¹³æˆ–å‚ç›´æ»šåŠ¨çš„é¡µé¢åˆ‡æ¢æ•ˆæœï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡æ»‘åŠ¨æˆ–ç‚¹å‡»é¡µé¢æ¥åˆ‡æ¢è§†å›¾æ§åˆ¶å™¨ã€‚
4. UITableViewController æ˜¯ä¸€ä¸ªè¡¨æ ¼è§†å›¾æ§åˆ¶å™¨ç±»ï¼Œç”¨äºç®¡ç†è¡¨æ ¼è§†å›¾çš„æ˜¾ç¤ºå’Œäº¤äº’ã€‚å®ƒæä¾›äº†ä¸€ç§æ–¹ä¾¿çš„æ–¹å¼æ¥æ˜¾ç¤ºå’Œç¼–è¾‘è¡¨æ ¼æ•°æ®ï¼Œå¹¶å¤„ç†è¡¨æ ¼è§†å›¾çš„å§”æ‰˜å’Œæ•°æ®æºæ–¹æ³•ã€‚
5. UIContainerView æ˜¯ä¸€ä¸ªå®¹å™¨è§†å›¾ç±»ï¼Œç”¨äºåœ¨ä¸€ä¸ªè§†å›¾æ§åˆ¶å™¨ä¸­æ‰¿è½½å¦ä¸€ä¸ªè§†å›¾æ§åˆ¶å™¨ã€‚å®ƒå…è®¸æ‚¨åœ¨ä¸€ä¸ªè§†å›¾æ§åˆ¶å™¨ä¸­åµŒå…¥å…¶ä»–è§†å›¾æ§åˆ¶å™¨ï¼Œå¹¶ç®¡ç†å®ƒä»¬ä¹‹é—´çš„è½¬åœºå’Œé€šä¿¡ã€‚

### 2.3 UINavigationController

å…ˆæ¥æŠ›å‡ºä¸€ä¸ªé—®é¢˜ï¼šé€šè¿‡ navigationController è·³è½¬åˆ°æŒ‡å®šçš„é¡µé¢æ— æ•ˆã€‚ä¸ºä»€ä¹ˆæ²¡æœ‰ååº”ï¼Ÿ

```oc
PalmWebViewController *vc = [[PalmWebViewController alloc] init];
[self.navigationController pushViewController:vc animated:NO];
```

å¦‚æœé€šè¿‡navigationControllerè·³è½¬åˆ°æŒ‡å®šé¡µé¢æ²¡æœ‰ååº”ï¼Œå¯èƒ½æœ‰ä»¥ä¸‹å‡ ä¸ªåŸå› ï¼š

1. ç¡®ä¿ä½ çš„å¯¼èˆªæ§åˆ¶å™¨å·²æ­£ç¡®è®¾ç½®ï¼Œå¹¶ä¸”å·²ç»ä¸å½“å‰è§†å›¾æ§åˆ¶å™¨ç›¸å…³è”ã€‚é€šè¿‡ä»¥ä¸‹ä»£ç æ¥æ£€æŸ¥å¯¼èˆªæ§åˆ¶å™¨æ˜¯å¦å­˜åœ¨ï¼šif (self.navigationController)
2. å¯¼èˆªæ§åˆ¶å™¨ä¸å¯è§æˆ–å·²éšè—ï¼šå¦‚æœå¯¼èˆªæ§åˆ¶å™¨å½“å‰ä¸å¯è§æˆ–å·²éšè—ï¼Œè·³è½¬å¯èƒ½ä¸ä¼šäº§ç”Ÿä»»ä½•æ•ˆæœã€‚

## 03.Controllerç”Ÿå‘½å‘¨æœŸ

UIViewControlleræ˜¯iOSå¼€å‘ä¸­å¸¸ç”¨çš„è§†å›¾æ§åˆ¶å™¨ç±»ï¼Œå®ƒæœ‰ç€ç‰¹å®šçš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ï¼Œç”¨äºç®¡ç†è§†å›¾æ§åˆ¶å™¨çš„åˆ›å»ºã€åŠ è½½ã€æ˜¾ç¤ºå’Œé”€æ¯è¿‡ç¨‹ã€‚ä»¥ä¸‹æ˜¯UIViewControllerçš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•çš„é¡ºåºï¼š

1. init(nibName:bundle:) æˆ– init(coder:)ï¼šåˆå§‹åŒ–æ–¹æ³•ï¼Œç”¨äºåˆ›å»ºè§†å›¾æ§åˆ¶å™¨çš„å®ä¾‹ã€‚
2. loadView()ï¼šåŠ è½½è§†å›¾æ§åˆ¶å™¨çš„è§†å›¾å±‚æ¬¡ç»“æ„ã€‚åœ¨æ­¤æ–¹æ³•ä¸­ï¼Œæ‚¨å¯ä»¥æ‰‹åŠ¨åˆ›å»ºè§†å›¾æˆ–ä»nibæ–‡ä»¶åŠ è½½è§†å›¾ã€‚
3. viewDidLoad()ï¼šè§†å›¾å·²ç»åŠ è½½å®Œæˆï¼Œå¹¶ä¸”å¯ä»¥è¿›è¡Œè¿›ä¸€æ­¥çš„é…ç½®ã€‚åœ¨æ­¤æ–¹æ³•ä¸­ï¼Œæ‚¨å¯ä»¥æ‰§è¡Œä¸€æ¬¡æ€§çš„è®¾ç½®ï¼Œä¾‹å¦‚è®¾ç½®æ•°æ®æºã€æ³¨å†Œé€šçŸ¥ç­‰ã€‚
4. viewWillAppear(_ğŸ˜ƒï¼šè§†å›¾å°†è¦æ˜¾ç¤ºåœ¨å±å¹•ä¸Šï¼Œä½†å°šæœªå®Œæˆå¸ƒå±€ã€‚åœ¨æ­¤æ–¹æ³•ä¸­ï¼Œæ‚¨å¯ä»¥æ‰§è¡Œä¸€äº›å‡†å¤‡å·¥ä½œï¼Œä¾‹å¦‚æ›´æ–°æ•°æ®ã€è®¾ç½®åŠ¨ç”»æ•ˆæœç­‰ã€‚
5. viewDidAppear(_ğŸ˜ƒï¼šè§†å›¾å·²ç»æ˜¾ç¤ºåœ¨å±å¹•ä¸Šï¼Œå¹¶ä¸”å·²ç»å®Œæˆå¸ƒå±€ã€‚åœ¨æ­¤æ–¹æ³•ä¸­ï¼Œæ‚¨å¯ä»¥æ‰§è¡Œä¸€äº›éœ€è¦åœ¨è§†å›¾å®Œå…¨å¯è§åæ‰èƒ½è¿›è¡Œçš„æ“ä½œï¼Œä¾‹å¦‚å¯åŠ¨å®šæ—¶å™¨ã€å¼€å§‹åŠ¨ç”»ç­‰ã€‚
6. viewWillDisappear(_ğŸ˜ƒï¼šè§†å›¾å°†è¦ä»å±å¹•ä¸Šæ¶ˆå¤±ã€‚åœ¨æ­¤æ–¹æ³•ä¸­ï¼Œæ‚¨å¯ä»¥æ‰§è¡Œä¸€äº›æ¸…ç†å·¥ä½œï¼Œä¾‹å¦‚å–æ¶ˆå®šæ—¶å™¨ã€ä¿å­˜æ•°æ®ç­‰ã€‚
7. viewDidDisappear(_ğŸ˜ƒï¼šè§†å›¾å·²ç»ä»å±å¹•ä¸Šæ¶ˆå¤±ã€‚åœ¨æ­¤æ–¹æ³•ä¸­ï¼Œæ‚¨å¯ä»¥æ‰§è¡Œä¸€äº›é¢å¤–çš„æ¸…ç†å·¥ä½œï¼Œä¾‹å¦‚é‡Šæ”¾èµ„æºã€å–æ¶ˆæ³¨å†Œé€šçŸ¥ç­‰ã€‚
8. deinit/deallocï¼šè§†å›¾æ§åˆ¶å™¨å³å°†è¢«é”€æ¯ã€‚åœ¨æ­¤æ–¹æ³•ä¸­ï¼Œæ‚¨å¯ä»¥æ‰§è¡Œæœ€åçš„æ¸…ç†å·¥ä½œï¼Œä¾‹å¦‚é‡Šæ”¾å†…å­˜ã€å–æ¶ˆå¼•ç”¨ç­‰ã€‚

è¿™äº›ç”Ÿå‘½å‘¨æœŸæ–¹æ³•æä¾›äº†åœ¨ä¸åŒé˜¶æ®µæ‰§è¡Œä»£ç çš„æœºä¼šï¼Œä»¥ä¾¿æ‚¨å¯ä»¥åœ¨é€‚å½“çš„æ—¶æœºè¿›è¡Œåˆå§‹åŒ–ã€é…ç½®ã€æ›´æ–°å’Œæ¸…ç†æ“ä½œã€‚äº†è§£UIViewControllerçš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•å¯ä»¥å¸®åŠ©æ‚¨æ›´å¥½åœ°ç®¡ç†å’Œæ§åˆ¶è§†å›¾æ§åˆ¶å™¨çš„è¡Œä¸ºã€‚

### 3.1 åˆå§‹åŒ–æ–¹æ³•

åœ¨iOSåº”ç”¨å¼€å‘ä¸­ï¼ŒUIViewControlleræ˜¯è§†å›¾æ§åˆ¶å™¨çš„åŸºç¡€ç±»ï¼Œè´Ÿè´£è§†å›¾çš„ç®¡ç†ä¸äº¤äº’ã€‚åˆå§‹åŒ–æ–¹æ³•æ˜¯è§†å›¾æ§åˆ¶å™¨ç”Ÿå‘½å‘¨æœŸçš„ç¬¬ä¸€ä¸ªç¯èŠ‚ï¼Œå®ƒä¸»è¦è´Ÿè´£è®¾ç½®åˆå§‹çŠ¶æ€å’Œç¯å¢ƒã€‚å¸¸ç”¨åˆå§‹åŒ–æ–¹æ³•åŒ…æ‹¬ï¼š

```swift
init(nibName nibNameOrNil: String?, bundle nibBundleOrNil: Bundle?)
init?(coder aDecoder: NSCoder)
```

ä»£ç é€»è¾‘åˆ†æï¼š

init(nibName:nibNameOrNil:bundle:) æ–¹æ³•å…è®¸å¼€å‘è€…æŒ‡å®šä¸€ä¸ªnibæ–‡ä»¶åï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ï¼Œå¹¶åˆ›å»ºè§†å›¾æ§åˆ¶å™¨ã€‚ bundle å‚æ•°é€šå¸¸å¯ä»¥ä¸ä¼ ï¼Œé»˜è®¤æ˜¯nilï¼Œæ„å‘³ç€ä½¿ç”¨ä¸»ç¨‹åºåŒ…ã€‚

init?(coder:) æ˜¯é€šè¿‡Interface Builderåˆ›å»ºè§†å›¾æ§åˆ¶å™¨æ—¶è°ƒç”¨çš„åˆå§‹åŒ–æ–¹æ³•ã€‚ NSCoder æ˜¯ä¸€ä¸ªç¼–ç å™¨ï¼Œç”¨æ¥è§£ç å­˜å‚¨åœ¨nibæ–‡ä»¶æˆ–å½’æ¡£æ–‡ä»¶ä¸­çš„å¯¹è±¡ã€‚

### 3.2 åŠ è½½è§†å›¾æ–¹æ³•

åŠ è½½è§†å›¾æ˜¯è§†å›¾æ§åˆ¶å™¨ç”Ÿå‘½å‘¨æœŸä¸­éå¸¸é‡è¦çš„ä¸€æ­¥ï¼Œæ¶‰åŠåˆ°è§†å›¾çš„å‘ˆç°ä¸å†…å®¹å¡«å……ã€‚

```swift
override func loadView() {
    super.loadView()
    // åœ¨è¿™é‡Œè¿›è¡Œè‡ªå®šä¹‰çš„è§†å›¾åŠ è½½é€»è¾‘
}
```

ä»£ç é€»è¾‘åˆ†æï¼š

1. loadView() æ˜¯ä¸€ä¸ªè¢«é‡å†™çš„è™šæ–¹æ³•ï¼Œåœ¨è¯¥æ–¹æ³•ä¸­å¯ä»¥è‡ªå®šä¹‰åŠ è½½è§†å›¾çš„é€»è¾‘ã€‚è¿™æ˜¯è§†å›¾è¢«åˆ›å»ºå¹¶åŠ è½½çš„æ—¶æœºã€‚
2. è°ƒç”¨ super.loadView() å¯ä»¥ä¿è¯çˆ¶ç±»çš„åŠ è½½é€»è¾‘è¢«æ‰§è¡Œï¼Œè¿™æ˜¯å¿…è¦çš„æ­¥éª¤ã€‚

æ‰©å±•æ€§è¯´æ˜ï¼š

1. å¦‚æœè§†å›¾æ§åˆ¶å™¨ä¸ä½¿ç”¨nibæ–‡ä»¶æ¥åŠ è½½è§†å›¾ï¼Œåˆ™å¿…é¡»é‡å†™ loadView æ–¹æ³•ï¼Œå¹¶åœ¨å…¶ä¸­åˆ›å»ºå’Œé…ç½®è§†å›¾ã€‚
2. åœ¨å¼€å‘ä¸­ï¼Œå¦‚æœéœ€è¦å¯¹è§†å›¾å±‚æ¬¡ç»“æ„è¿›è¡Œå¤æ‚çš„å®šåˆ¶ï¼Œç»å¸¸ä¼šé‡å†™æ­¤æ–¹æ³•ã€‚

### 3.3 è§†å›¾å‡ºç°ä¸æ¶ˆå¤±

åœ¨è§†å›¾æ§åˆ¶å™¨çš„ç”Ÿå‘½å‘¨æœŸä¸­ï¼Œè§†å›¾å‡ºç°å’Œæ¶ˆå¤±æ—¶ï¼Œç³»ç»Ÿä¼šè°ƒç”¨ç‰¹å®šçš„å›è°ƒæ–¹æ³•ï¼Œè®©å¼€å‘è€…æœ‰æœºä¼šæ‰§è¡Œä¸€äº›é¢å¤–çš„é€»è¾‘ã€‚

```swift
override func viewWillAppear(_ animated: Bool) {
    super.viewWillAppear(animated)
    // è§†å›¾å³å°†å‡ºç°åœ¨å±å¹•ä¸Šæ—¶æ‰§è¡Œçš„ä»£ç 
}
 
override func viewWillDisappear(_ animated: Bool) {
    super.viewWillDisappear(animated)
    // è§†å›¾å³å°†ä»å±å¹•ä¸Šæ¶ˆå¤±æ—¶æ‰§è¡Œçš„ä»£ç 
}
```

ä»£ç é€»è¾‘åˆ†æï¼š

1. viewWillAppear(_ğŸ˜ƒ åœ¨è§†å›¾å°†è¦å‡ºç°åœ¨å±å¹•ä¸Šæ—¶è°ƒç”¨ï¼Œæ­¤æ—¶è§†å›¾å·²ç»åœ¨è§†å›¾å±‚æ¬¡ä¸­ï¼Œä½†å°šæœªæ˜¾ç¤ºã€‚å¯ä»¥åœ¨è¿™é‡Œåšä¸€äº›é¢„åŠ è½½æ•°æ®çš„å·¥ä½œã€‚
2. viewWillDisappear(_ğŸ˜ƒ åœ¨è§†å›¾å³å°†ä»å±å¹•ä¸Šæ¶ˆå¤±æ—¶è°ƒç”¨ï¼Œæ­¤æ—¶è§†å›¾è¿˜åœ¨è§†å›¾å±‚æ¬¡ä¸­ï¼Œä½†å³å°†è¢«ç§»é™¤ã€‚å¯ä»¥åœ¨è¿™é‡Œåšä¸€äº›æ¸…ç†å·¥ä½œã€‚ 

æ‰©å±•æ€§è¯´æ˜ï¼š

1. åœ¨è¿™ä¸¤ä¸ªæ–¹æ³•ä¸­å¯ä»¥å¤„ç†ä¸€äº›è§†å›¾çŠ¶æ€è½¬æ¢çš„é€»è¾‘ï¼Œæ¯”å¦‚æ›´æ–°å¯¼èˆªæ æ ‡é¢˜ã€é…ç½®é¡µé¢åŠ¨ç”»ç­‰ã€‚
2. éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¯¹äºå¼‚æ­¥åŠ è½½æ•°æ®çš„æƒ…å†µï¼Œåº”è¯¥ç¡®ä¿åœ¨è§†å›¾å‡ºç°ä¹‹å‰åŠ è½½å®Œæ¯•ï¼Œä»¥å…é€ æˆç”¨æˆ·ä½“éªŒä¸Šçš„å»¶è¿Ÿã€‚

### 3.4 è§†å›¾åŠ è½½æ—¶æœº

è§†å›¾åŠ è½½æ—¶æœºå†³å®šäº†è§†å›¾å±‚æ¬¡ç»“æ„çš„æ„å»ºæ–¹å¼ï¼Œè¿™å¯¹äºæ€§èƒ½å’Œç”¨æˆ·äº¤äº’è‡³å…³é‡è¦ã€‚

```swift
override func viewDidLoad() {
    super.viewDidLoad()
    // åœ¨è¿™é‡Œè¿›è¡Œè§†å›¾æ§åˆ¶å™¨çš„è§†å›¾åŠ è½½å®Œæˆåçš„åˆå§‹åŒ–å·¥ä½œ
}
```

ä»£ç é€»è¾‘åˆ†æï¼š

1. viewDidLoad() æ–¹æ³•åœ¨è§†å›¾å±‚æ¬¡ç»“æ„åŠ è½½å®Œæˆåè°ƒç”¨ã€‚è¿™æ˜¯åˆå§‹åŒ–è§†å›¾æ§åˆ¶å™¨è§†å›¾å±‚æ¬¡ç»“æ„çš„ç»ä½³æ—¶æœºã€‚
2. åœ¨è¿™ä¸ªæ–¹æ³•ä¸­ï¼Œå¯ä»¥è¿›è¡Œè§†å›¾å±‚æ¬¡çš„åˆå§‹åŒ–ã€å­è§†å›¾æ§åˆ¶å™¨çš„åˆå§‹åŒ–å’Œé…ç½®ã€‚

æ‰©å±•æ€§è¯´æ˜ï¼š

1. è¯¥æ–¹æ³•è°ƒç”¨åï¼Œæ‰€æœ‰çš„è§†å›¾å­ç±»å·²ç»åŠ è½½å®Œæ¯•ï¼Œä½†è§†å›¾å°šæœªæ·»åŠ åˆ°è§†å›¾å±‚æ¬¡ä¸­ã€‚
2. é€šå¸¸ä½¿ç”¨ viewDidLoad() æ¥é…ç½®é™æ€çš„è§†å›¾ç»„ä»¶ï¼Œå¦‚æ ‡ç­¾ã€æŒ‰é’®ç­‰ã€‚

### 3.5 çŠ¶æ€å˜åŒ–å¤„ç†

åœ¨è§†å›¾æ§åˆ¶å™¨çš„ç”Ÿå‘½å‘¨æœŸä¸­ï¼Œéœ€è¦å¤„ç†å¤šç§çŠ¶æ€çš„å˜åŒ–ï¼Œä»¥ä¿è¯åº”ç”¨çš„ç¨³å®šæ€§å’Œæµç•…æ€§ã€‚

```swift
override func viewDidDisappear(_ animated: Bool) {
    super.viewDidDisappear(animated)
    // åœ¨è¿™é‡Œè¿›è¡Œè§†å›¾æ¶ˆå¤±åçš„æ¸…ç†å·¥ä½œ
}
```

ä»£ç é€»è¾‘åˆ†æï¼š

1. viewDidDisappear(_ğŸ˜ƒ åœ¨è§†å›¾ä»å±å¹•ä¸Šæ¶ˆå¤±åè°ƒç”¨ã€‚æ­¤æ—¶è§†å›¾å±‚æ¬¡å·²ç»ä»çˆ¶è§†å›¾ä¸­ç§»é™¤ã€‚
2. è¿™ä¸ªæ—¶æœºç‚¹å¯ä»¥ç”¨äºæ‰§è¡Œè§†å›¾ä¸å¯è§æ—¶éœ€è¦åšçš„æ“ä½œï¼Œä¾‹å¦‚åœæ­¢ä¸€äº›åŠ¨ç”»æ•ˆæœã€å–æ¶ˆç½‘ç»œè¯·æ±‚ç­‰ã€‚

æ‰©å±•æ€§è¯´æ˜ï¼š

1. è§†å›¾æ§åˆ¶å™¨åœ¨æ¶ˆå¤±åä¾ç„¶å­˜åœ¨äºå†…å­˜ä¸­ï¼Œç›´åˆ°è¢«ç³»ç»Ÿå®Œå…¨é”€æ¯ã€‚
2. åœ¨æ­¤æ–¹æ³•ä¸­æ‰§è¡Œæ¸…ç†å·¥ä½œå¯ä»¥å¸®åŠ©é‡Šæ”¾èµ„æºï¼Œå‡å°‘å†…å­˜æ³„æ¼çš„é£é™©ã€‚

### 3.6 ç³»ç»Ÿäº‹ä»¶å“åº”

è§†å›¾æ§åˆ¶å™¨ä¸ä»…è¦å¤„ç†è§†å›¾çš„ç”Ÿå‘½å‘¨æœŸäº‹ä»¶ï¼Œè¿˜éœ€è¦å“åº”ç”¨æˆ·çš„äº¤äº’åŠç³»ç»Ÿäº‹ä»¶ã€‚

```swift
override func motionBegan(_ motion: UIEvent.EventSubtype, with event: UIEvent?) {
    super.motionBegan(motion, with: event)
    // åœ¨è¿™é‡Œå¤„ç†ç³»ç»Ÿäº‹ä»¶ï¼Œä¾‹å¦‚è®¾å¤‡æ–¹å‘å˜åŒ–
}
```

ä»£ç é€»è¾‘åˆ†æï¼š

1. motionBegan(_:with:) æ˜¯ä¸€ä¸ªç”¨æ¥å“åº”ç³»ç»Ÿäº‹ä»¶çš„æ–¹æ³•ï¼Œä¾‹å¦‚è®¾å¤‡çš„æ–¹å‘å˜åŒ–ã€‚
2. é‡å†™æ­¤æ–¹æ³•å¯ä»¥è‡ªå®šä¹‰è®¾å¤‡æ–¹å‘å˜åŒ–æ—¶çš„å“åº”é€»è¾‘ï¼Œæ¯”å¦‚æ—‹è½¬åŠ¨ç”»æˆ–æ›´æ–°å¸ƒå±€ã€‚

æ‰©å±•æ€§è¯´æ˜ï¼š

1. å…¶ä»–ç³»ç»Ÿäº‹ä»¶åŒ…æ‹¬ä½†ä¸é™äºæ‘‡æ™ƒäº‹ä»¶ã€è¿ç»­ç‚¹å‡»äº‹ä»¶ç­‰ã€‚
2. ç³»ç»Ÿäº‹ä»¶å¤„ç†å¢åŠ äº†ç”¨æˆ·äº¤äº’çš„å¤æ‚æ€§ï¼Œåˆç†çš„è®¾è®¡å¯ä»¥æå‡ç”¨æˆ·ä½“éªŒã€‚

### 3.7 ä»£ç å¼€å‘å»ºè®®

- 1ã€inité‡Œä¸è¦å‡ºç°åˆ›å»ºviewçš„ä»£ç ã€‚è‰¯å¥½çš„è®¾è®¡ï¼Œåœ¨inité‡Œåº”è¯¥åªæœ‰ç›¸å…³æ•°æ®çš„åˆå§‹åŒ–ï¼Œè€Œä¸”è¿™äº›æ•°æ®éƒ½æ˜¯æ¯”è¾ƒå…³é”®çš„æ•°æ®ã€‚inité‡Œä¸è¦æ‰self.viewï¼Œå¦åˆ™ä¼šå¯¼è‡´viewControlleråˆ›å»ºviewã€‚ï¼ˆå› ä¸ºviewæ˜¯lazyInitçš„ï¼‰ã€‚
- 2ã€loadViewä¸­åªåˆå§‹åŒ–viewï¼Œä¸€èˆ¬ç”¨äºåˆ›å»ºæ¯”è¾ƒå…³é”®çš„viewå¦‚tableViewControllerçš„tabViewï¼ŒUINavigationControllerçš„navigationBarï¼Œä¸å¯æ‰ç”¨viewçš„getterï¼ˆåœ¨æ‰super loadViewå‰ï¼‰ï¼Œæœ€å¥½ä¹Ÿä¸è¦åˆå§‹åŒ–ä¸€äº›éå…³é”®çš„viewã€‚å¦‚æœä½ æ˜¯ä»nibæ–‡ä»¶ä¸­åˆ›å»ºçš„viewControlleråœ¨è¿™é‡Œä¸€å®šè¦é¦–å…ˆè°ƒç”¨superçš„loadViewæ–¹æ³•ï¼Œä½†å»ºè®®ä¸è¦é‡è½½è¿™ä¸ªæ–¹æ³•ã€‚
- 3ã€viewDidLoad è¿™æ—¶å€™viewå·²ç»æœ‰äº†ï¼Œæœ€é€‚åˆåˆ›å»ºä¸€äº›é™„åŠ çš„viewå’Œæ§ä»¶äº†ã€‚
- 4ã€viewWillAppear è¿™ä¸ªä¸€èˆ¬åœ¨viewè¢«æ·»åŠ åˆ°superviewä¹‹å‰ï¼Œåˆ‡æ¢åŠ¨ç”»ä¹‹å‰è°ƒç”¨ã€‚åœ¨è¿™é‡Œå¯ä»¥è¿›è¡Œä¸€äº›æ˜¾ç¤ºå‰çš„å¤„ç†ã€‚æ¯”å¦‚é”®ç›˜å¼¹å‡ºï¼Œä¸€äº›ç‰¹æ®Šçš„è¿‡ç¨‹åŠ¨ç”»ï¼ˆæ¯”å¦‚çŠ¶æ€æ¡å’ŒnavigationBaré¢œè‰²ï¼‰ã€‚
- 5ã€viewWillLayoutSubViews ä¸€èˆ¬ç”¨äºæ˜¾ç¤ºå‰,å¯¹å­æ§ä»¶è¿›è¡Œå¸ƒå±€
- 6ã€viewWillLayoutSubViewså­æ§ä»¶å¸ƒå±€å®Œæˆ,å¯ä»¥åœ¨è¿™æ–¹æ³•é‡Œé¢å¯¹å­æ§ä»¶è¿›è¡Œä¸€äº›åˆå§‹åŒ–æ“ä½œ.
- 7ã€viewDidAppear ä¸€èˆ¬ç”¨äºæ˜¾ç¤ºåï¼Œåœ¨åˆ‡æ¢åŠ¨ç”»åï¼Œå¦‚æœæœ‰éœ€è¦çš„æ“ä½œï¼Œå¯ä»¥åœ¨è¿™é‡ŒåŠ å…¥ç›¸å…³ä»£ç ã€‚
- 8ã€viewDidUnload è¿™æ—¶å€™viewControllerçš„viewå·²ç»æ˜¯niläº†ã€‚ç”±äºè¿™ä¸€èˆ¬å‘ç”Ÿåœ¨å†…å­˜è­¦å‘Šæ—¶ï¼Œæ‰€ä»¥åœ¨è¿™é‡Œä½ åº”è¯¥å°†é‚£äº›ä¸åœ¨æ˜¾ç¤ºçš„viewé‡Šæ”¾äº†ã€‚æ¯”å¦‚ä½ åœ¨viewControllerçš„viewä¸ŠåŠ äº†ä¸€ä¸ªlabelï¼Œè€Œä¸”è¿™ä¸ªlabelæ˜¯viewcontrollerçš„å±æ€§ï¼Œé‚£ä¹ˆä½ è¦æŠŠè¿™ä¸ªå±æ€§è®¾ç½®æˆnilï¼Œä»¥å…å ç”¨ä¸å¿…è¦çš„å†…å­˜ï¼Œè€Œè¿™ä¸ªlabelåœ¨viewDidLoadæ—¶ä¼šé‡æ–°åˆ›å»ºã€‚
- 9ã€æ¥ä¸‹æ¥çœ‹çœ‹ViewControllerä¸­çš„viewæ˜¯å¦‚ä½•è¢«å¸è½½çš„ï¼šå½“ç³»ç»Ÿå‘å‡ºå†…å­˜è­¦å‘Šæ—¶ï¼Œä¼šè°ƒç”¨didReceiveMemoryWarningæ–¹æ³•ï¼Œå¦‚æœå½“å‰æœ‰èƒ½è¢«é‡Šæ”¾çš„viewï¼Œç³»ç»Ÿä¼šè°ƒç”¨viewWillUnloadæ–¹æ³•æ¥é‡Šæ”¾viewï¼Œå®Œæˆåè°ƒç”¨viewDidUnloadæ–¹æ³•ï¼Œè‡³æ­¤ï¼Œviewå°±è¢«å¸è½½äº†ã€‚æ­¤æ—¶åŸæœ¬æŒ‡å‘viewçš„å˜é‡è¦è¢«ç½®ä¸ºnilï¼Œå…·ä½“æ“ä½œæ˜¯åœ¨viewDidUnloadæ–¹æ³•ä¸­è°ƒç”¨self.myButton = nil;


## 04.Controllerå†…ç½®å±æ€§
### 4.1 ä¸»è¦çš„å±æ€§

è§†å›¾æ§åˆ¶å™¨æ˜¯iOSåº”ç”¨å¼€å‘ä¸­ä¸å¯æˆ–ç¼ºçš„ä¸€ä¸ªé‡è¦ç»„ä»¶ã€‚å®ƒç®¡ç†ç€ä¸€ä¸ªå±å¹•çš„å†…å®¹å±•ç¤ºä»¥åŠç”¨æˆ·çš„äº¤äº’æ“ä½œã€‚

åœ¨æ·±å…¥æ¢è®¨è§†å›¾æ§åˆ¶å™¨çš„å†…ç½®å±æ€§ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦äº†è§£å‡ ä¸ªå…³é”®å±æ€§ï¼š view , navigationItem , tabBarItem ç­‰ã€‚

1. view : è¿™æ˜¯è§†å›¾æ§åˆ¶å™¨æœ€é‡è¦çš„å±æ€§ä¹‹ä¸€ï¼Œå®ƒæ˜¯ä¸€ä¸ªUIViewå¯¹è±¡ï¼Œä½œä¸ºç•Œé¢çš„ä¸»è§†å›¾ã€‚æ‰€æœ‰çš„ç”¨æˆ·ç•Œé¢å…ƒç´ éƒ½æ˜¯è¿™ä¸ªè§†å›¾çš„å­è§†å›¾ã€‚
2. navigationItem : å¦‚æœè§†å›¾æ§åˆ¶å™¨è¢«åµŒå…¥åˆ°UINavigationControllerä¸­ï¼Œ navigationItem ç”¨äºé…ç½®å¯¼èˆªæ ä¸Šçš„æ ‡é¢˜ã€æŒ‰é’®ç­‰å…ƒç´ ã€‚
3. tabBarItem : åœ¨ä½¿ç”¨UITabBarControlleræ—¶ï¼Œ tabBarItem å±æ€§å…è®¸å¼€å‘è€…ä¸ºè¯¥è§†å›¾æ§åˆ¶å™¨è®¾ç½®åº•éƒ¨æ ‡ç­¾æ çš„æ ‡é¢˜ã€å›¾æ ‡å’Œæ ·å¼ã€‚ 

ä¾‹å¦‚ï¼Œåœ¨ viewDidLoad æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šåˆå§‹åŒ–è¿™äº›å±æ€§ï¼š

```swift
override func viewDidLoad() {
    super.viewDidLoad()
    // è‡ªå®šä¹‰viewçš„åˆå§‹åŒ–
    // é…ç½®navigationItem
    self.navigationItem.title = "é¦–é¡µ"
    // å¦‚æœæœ‰éœ€è¦ï¼Œå¯ä»¥æ·»åŠ å¯¼èˆªæ æŒ‰é’®ç­‰
    let rightButton = UIBarButtonItem(title: "ç¼–è¾‘", style: .plain, target: self, action: #selector(toggleEditMode))
    self.navigationItem.rightBarButtonItem = rightButton
 
    // é…ç½®tabBarItem
    self.tabBarItem.title = "è®¾ç½®"
    self.tabBarItem.image = UIImage(named: "settingsIcon")
}
```


### 4.2 å±æ€§è®¾ç½®å®è·µ

åœ¨è®¾ç½®è§†å›¾æ§åˆ¶å™¨çš„å†…ç½®å±æ€§æ—¶ï¼Œæœ€ä½³å®è·µæ˜¯å°½å¯èƒ½æ—©åœ°åˆå§‹åŒ–ï¼Œä»¥é¿å…å»¶è¿Ÿåˆå§‹åŒ–å¸¦æ¥çš„æ€§èƒ½é—®é¢˜å’Œæ½œåœ¨çš„bugã€‚åŒæ—¶ï¼Œå±æ€§çš„è®¾ç½®åº”å½“éµå¾ªç®€æ´ã€ç›´è§‚çš„åŸåˆ™ã€‚

å½“æ¶‰åŠåˆ° view å±æ€§æ—¶ï¼Œåº”å½“éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

1. åˆ›å»ºå­è§†å›¾ : åœ¨ loadView æ–¹æ³•ä¸­åˆ›å»º view å±æ€§éœ€è¦çš„æ‰€æœ‰å­è§†å›¾ã€‚
2. è®¾ç½®çº¦æŸ : é€šè¿‡Auto Layoutè®¾ç½®å­è§†å›¾çš„çº¦æŸï¼Œä»¥ç¡®ä¿åœ¨ä¸åŒè®¾å¤‡ä¸Šéƒ½èƒ½æ­£ç¡®æ˜¾ç¤ºã€‚
3. é…ç½®å­è§†å›¾ : é€šè¿‡ç¼–ç¨‹æˆ–Interface Builderè®¾ç½®å­è§†å›¾çš„æ ·å¼ã€æ·»åŠ äº‹ä»¶ç›‘å¬ç­‰ã€‚

å¯¹äº navigationItem å’Œ tabBarItem ï¼Œåº”å½“æ ¹æ®å…¶è§’è‰²åœ¨å¯¹åº”çš„ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä¸­è¿›è¡Œé…ç½®ã€‚ä¾‹å¦‚ï¼Œåœ¨ viewDidLoad æˆ–è€… viewWillAppear æ–¹æ³•ä¸­ã€‚

## 05.Controllerå¯¼èˆªæ–¹æ³•
### 5.1 åµŒå…¥ä¸å¼¹å‡º

åœ¨iOSåº”ç”¨ä¸­ï¼Œå¯¼èˆªæ§åˆ¶å™¨æ˜¯å¸¸è§çš„è§†å›¾æ§åˆ¶å™¨å®¹å™¨ä¹‹ä¸€ã€‚å®ƒå…è®¸æˆ‘ä»¬ä»¥å †æ ˆçš„å½¢å¼ç®¡ç†è§†å›¾æ§åˆ¶å™¨ï¼Œå¹¶æä¾›å‰è¿›ã€åé€€çš„å¯¼èˆªåŠŸèƒ½ã€‚

å°†è§†å›¾æ§åˆ¶å™¨åµŒå…¥å¯¼èˆªæ§åˆ¶å™¨ä¸­æ˜¯ä¸€ä¸ªå¸¸è§çš„æ“ä½œï¼š

```
let navigationController = UINavigationController(rootViewController: YourViewController())
self.window?.rootViewController = navigationController
```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ YourViewController() æ˜¯ä¸€ä¸ªè§†å›¾æ§åˆ¶å™¨çš„å®ä¾‹ï¼Œè¢«è®¾ç½®ä¸ºå¯¼èˆªæ§åˆ¶å™¨çš„æ ¹è§†å›¾æ§åˆ¶å™¨ã€‚

å½“éœ€è¦ä»å¯¼èˆªæ§åˆ¶å™¨ä¸­å¼¹å‡ºå½“å‰è§†å›¾æ§åˆ¶å™¨æ—¶ï¼Œå¯ä»¥è°ƒç”¨ï¼š

```
self.navigationController?.popViewController(animated: true)
```

å¦‚æœéœ€è¦è¿”å›ä¸Šä¸€çº§è§†å›¾æ§åˆ¶å™¨ï¼Œè€Œåˆä¸æ˜¯å½“å‰è§†å›¾æ§åˆ¶å™¨ï¼Œåˆ™éœ€è¦é€šè¿‡å¯¼èˆªé¡¹è¿›è¡Œï¼š

```
if let previousViewController = self.navigationController?.viewControllers.firstIndex(of: self) {
    self.navigationController?.popToViewController(self.navigationController!.viewControllers[previousViewController - 1], animated: true)
}
```

### 5.2 æ¨é€ä¸å¼¹å‡º

æ¨é€ä¸€ä¸ªæ–°çš„è§†å›¾æ§åˆ¶å™¨åˆ°å¯¼èˆªæ§åˆ¶å™¨å †æ ˆæ˜¯ä¸€ç§å¸¸è§çš„æ–¹å¼æ¥è¿›è¡Œé¡µé¢è·³è½¬ï¼š

```
let nextViewController = NextViewController()
self.navigationController?.pushViewController(nextViewController, animated: true)
```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ NextViewController() ä»£è¡¨å³å°†æ¨é€åˆ°å¯¼èˆªå †æ ˆä¸­çš„è§†å›¾æ§åˆ¶å™¨ã€‚

å½“éœ€è¦è¿”å›åˆ°ä¸Šä¸€ä¸ªè§†å›¾æ§åˆ¶å™¨æ—¶ï¼Œå¯ä»¥ç›´æ¥è°ƒç”¨ popViewController æˆ– popViewControllerAnimated æ–¹æ³•ï¼š

```
self.navigationController?.popViewController(animated: true)
```

### 5.3 æºå¸¦å‚æ•°å¹¶å›è°ƒ

åœ¨æºè§†å›¾æ§åˆ¶å™¨ä¸­ï¼Œå®šä¹‰ä¸€ä¸ªä»£ç†åè®®ï¼Œå¹¶åœ¨ç›®æ ‡è§†å›¾æ§åˆ¶å™¨ä¸­è®¾ç½®ä¸€ä¸ªä»£ç†å±æ€§ã€‚ç„¶åï¼Œå½“ç›®æ ‡è§†å›¾æ§åˆ¶å™¨éœ€è¦å›ä¼ æ•°æ®æ—¶ï¼Œå¯ä»¥è°ƒç”¨ä»£ç†æ–¹æ³•å°†æ•°æ®ä¼ å›ç»™æºè§†å›¾æ§åˆ¶å™¨ã€‚

```
protocol PalmControllerDelegate : AnyObject{
    func sendPalmBack(code: Int, data: String)
}
```

åœ¨ç›®æ ‡è§†å›¾æ§åˆ¶å™¨ä¸­è®¾ç½®ä»£ç†å±æ€§å’Œå‚æ•°å±æ€§ï¼š

```
weak var delegate: PalmControllerDelegate?
var userId: String? = "";
var userName: String? = "";
var appId: Int = 0;
```

ç¬¬ä¸€æ­¥ï¼šåœ¨æºè§†å›¾æ§åˆ¶å™¨ä¸­ï¼Œè·³è½¬ç›®æ ‡æ§åˆ¶å™¨ï¼Œå¹¶ä¸”æºå¸¦å‚æ•°ï¼Œè®¾ç½®ä»£ç†å¦‚ä¸‹æ‰€ç¤ºï¼š

```
private func toNavController() {
    print("å¼€å§‹è·³è½¬ç›®æ ‡é¡µé¢ï¼Œå¹¶ä¸”æºå¸¦å‚æ•°");
    let viewController = NavigationDemoController()
    viewController.delegate = self;
    viewController.userId = "13667225184"
    viewController.userName = "ç”¨æˆ·åç§°"
    viewController.appId = 100;
    self.navigationController?.pushViewController(viewController, animated: true)
}
```

ç¬¬äºŒæ­¥ï¼šåœ¨ç›®æ ‡æ§åˆ¶å™¨ï¼Œå¤„ç†å›ä¼ æ•°æ®ï¼Œç„¶åé€šçŸ¥æºæ§åˆ¶å™¨æ¥å—æ•°æ®ï¼Œä»£ç å¦‚ä¸‹ï¼š

```
//ç›®æ ‡æ§åˆ¶å™¨
let backCode = 0;
let backData = "Hello from SecondViewController!"
delegate?.sendPalmBack(code: backCode, data: backData)
navigationController?.popViewController(animated: true)

//æºæ§åˆ¶å™¨ï¼Œä¸€å®šè¦éµå¾ªä»£ç†åè®®ï¼Œå°±æ˜¯æœ€å¼€å§‹å®šä¹‰çš„PalmControllerDelegate
class YourController: UIViewController ,PalmControllerDelegate {
//çœç•¥éƒ¨åˆ†ä»£ç 

    //å¤„ç†åˆ·æŒsdkè¿”å›çš„çŠ¶æ€
    //codeæ˜¯çŠ¶æ€ç 
    //dataæ˜¯æ•°æ®
    func sendPalmBack(code: Int, data: String) {
        print("å¼€å§‹æ‰“å°å›è°ƒå‚æ•°");
        print(code);
        print(data)     
    }
}
```


## 06.è§†å›¾å±‚æ¬¡ç®¡ç†æ„å»º
### 6.1 å­è§†å›¾æ·»åŠ &ç§»é™¤

åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦åœ¨çˆ¶è§†å›¾æ§åˆ¶å™¨ä¸­æ·»åŠ æˆ–ç§»é™¤å­è§†å›¾æ§åˆ¶å™¨ã€‚è¿™ç§æ–¹å¼å¯ä»¥è®©æˆ‘ä»¬æ›´å¥½åœ°ç®¡ç†å¤æ‚çš„ç•Œé¢é€»è¾‘ï¼ŒåŒæ—¶ä¿æŒä»£ç çš„æ¸…æ™°å’Œç»„ç»‡æ€§ã€‚

ä»£ç å—æ¼”ç¤ºå¦‚ä½•æ·»åŠ å­è§†å›¾æ§åˆ¶å™¨ï¼š

```
class ParentViewController: UIViewController {
    func addChild(_ viewController: UIViewController) {
        self.addChild(viewController)
        self.view.addSubview(viewController.view)
        viewController.view.translatesAutoresizingMaskIntoConstraints = false
        NSLayoutConstraint.activate([
            ***Anchor.constraint(equalTo: ***Anchor),
            viewController.view.leadingAnchor.constraint(equalTo: self.view.leadingAnchor),
            viewController.view.trailingAnchor.constraint(equalTo: self.view.trailingAnchor),
            viewController.view.bottomAnchor.constraint(equalTo: self.view.bottomAnchor)
        ])
    }
}
 
// ä½¿ç”¨æ—¶
let childVC = ChildViewController()
parentVC.addChild(childVC)
```

åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆè°ƒç”¨äº†çˆ¶è§†å›¾æ§åˆ¶å™¨çš„ addChild(ğŸ˜ƒ æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ä¼šè°ƒç”¨åˆ°UIKitæ¡†æ¶çš„ addChild(ğŸ˜ƒ æ–¹æ³•ï¼Œä»¥ç¡®ä¿è§†å›¾æ§åˆ¶å™¨çš„ç”Ÿå‘½å‘¨æœŸè¢«æ­£ç¡®ç®¡ç†ã€‚

ç„¶åï¼Œå°†å­è§†å›¾æ§åˆ¶å™¨çš„è§†å›¾æ·»åŠ åˆ°çˆ¶è§†å›¾æ§åˆ¶å™¨çš„è§†å›¾å±‚æ¬¡ä¸­ï¼Œå¹¶ä½¿ç”¨Auto Layoutçº¦æŸæ¥å®šä¹‰å­è§†å›¾æ§åˆ¶å™¨çš„è§†å›¾å¦‚ä½•å¡«å……çˆ¶è§†å›¾çš„è¾¹ç•Œã€‚

### 6.2 è§†å›¾å±‚æ¬¡å¸ƒå±€ä¸çº¦æŸ

è‰¯å¥½çš„è§†å›¾å¸ƒå±€å’Œçº¦æŸè®¾ç½®èƒ½å¤Ÿç¡®ä¿åº”ç”¨åœ¨ä¸åŒè®¾å¤‡å’Œå±å¹•å°ºå¯¸ä¸Šå‡èƒ½æ­£ç¡®æ˜¾ç¤ºã€‚ä½¿ç”¨Auto Layoutæ˜¯ç®¡ç†è§†å›¾å±‚æ¬¡ç»“æ„ä¸­è§†å›¾é—´å…³ç³»çš„æ¨èæ–¹å¼ã€‚

çº¦æŸç±»å‹	æè¿°
åŸºçº¿çº¦æŸ (baseline)	è®¾ç½®ä¸¤ä¸ªæ§ä»¶åŸºçº¿é—´çš„è·ç¦»
è¾¹è·çº¦æŸ (margins)	æ§ä»¶ä¸å…¶çˆ¶è§†å›¾è¾¹ç¼˜çš„è·ç¦»
ä¸­å¿ƒç‚¹çº¦æŸ (center)	æ§ä»¶ä¸­å¿ƒç‚¹ä¸çˆ¶è§†å›¾ä¸­å¿ƒç‚¹çš„å¯¹é½
å¤§å°çº¦æŸ (size)	æ§ä»¶çš„å®½åº¦å’Œé«˜åº¦
é¢†åŸŸçº¦æŸ (priority)	æ§åˆ¶çº¦æŸçš„ä¼˜å…ˆçº§ï¼Œè§£å†³å†²çªæ—¶çš„ä¼˜å…ˆé¡ºåº

ä½¿ç”¨Auto Layoutæ—¶ï¼Œæˆ‘ä»¬é€šå¸¸éœ€è¦è€ƒè™‘çº¦æŸå†²çªçš„è§£å†³ç­–ç•¥ï¼Œå³å½“å¤šä¸ªçº¦æŸæ¡ä»¶ä¸ä¸€è‡´æ—¶ï¼Œç³»ç»Ÿå¦‚ä½•å†³å®šæœ€ç»ˆçš„å¸ƒå±€çŠ¶æ€ã€‚è¿™é€šå¸¸éœ€è¦å¼€å‘è€…åœ¨è®¾ç½®çº¦æŸæ—¶ç»™çº¦æŸè®¾ç½®ä¼˜å…ˆçº§ï¼Œå¹¶é€šè¿‡è°ƒè¯•æ¥ç¡®ä¿å¸ƒå±€æ•ˆæœç¬¦åˆé¢„æœŸã€‚

### 6.3 æ§ä»¶æ·»åŠ ä¸å¸ƒå±€

åœ¨iOSå¼€å‘ä¸­ï¼Œæ·»åŠ å’Œå¸ƒå±€æ§ä»¶æ˜¯æœ€åŸºæœ¬çš„æ“ä½œã€‚ä¸‹é¢ä»¥Swiftä»£ç å—ç¤ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•ä¸ºä¸€ä¸ªç®€å•çš„ç™»å½•ç•Œé¢æ·»åŠ æŒ‰é’®å’Œæ–‡æœ¬å­—æ®µï¼Œå¹¶è¿›è¡Œå¸ƒå±€ã€‚

```
class LoginViewController: UIViewController {
    private lazy var usernameTextField: UITextField = {
        let textField = UITextField()
        textField.placeholder = "Username"
        return textField
    }()
    private lazy var passwordTextField: UITextField = {
        let textField = UITextField()
        textField.placeholder = "Password"
        textField.isSecureTextEntry = true
        return textField
    }()
    private lazy var loginButton: UIButton = {
        let button = UIButton(type: .system)
        button.setTitle("Login", for: .normal)
        return button
    }()
    override func viewDidLoad() {
        super.viewDidLoad()
        view.addSubview(usernameTextField)
        view.addSubview(passwordTextField)
        view.addSubview(loginButton)
        // ä½¿ç”¨NSLayoutConstraintä¸ºæ§ä»¶è®¾ç½®å¸ƒå±€
        NSLayoutConstraint.activate([
            ***Anchor.constraint(equalTo: ***Anchor, constant: 20),
            usernameTextField.leadingAnchor.constraint(equalTo: view.leadingAnchor, constant: 20),
            usernameTextField.widthAnchor.constraint(equalToConstant: 200),
            ***Anchor.constraint(equalTo: usernameTextField.bottomAnchor, constant: 10),
            passwordTextField.leadingAnchor.constraint(equalTo: view.leadingAnchor, constant: 20),
            passwordTextField.widthAnchor.constraint(equalToConstant: 200),
            ***Anchor.constraint(equalTo: passwordTextField.bottomAnchor, constant: 20),
            loginButton.centerXAnchor.constraint(equalTo: view.centerXAnchor),
            loginButton.widthAnchor.constraint(equalToConstant: 100)
        ])
    }
}
```

ä¸Šè¿°ä»£ç å—å±•ç¤ºäº†å¦‚ä½•åœ¨ viewDidLoad() æ–¹æ³•ä¸­æ·»åŠ æ§ä»¶å¹¶ä½¿ç”¨Auto Layoutæ¥è®¾ç½®å®ƒä»¬çš„å¸ƒå±€çº¦æŸã€‚

ä»£ç ä¸­ä½¿ç”¨äº† NSLayoutConstraint.activate(_ğŸ˜ƒ æ¥æ¿€æ´»ä¸€ç»„çº¦æŸï¼Œå¹¶ä½¿ç”¨äº† leadingAnchor ã€ trailingAnchor ã€ topAnchor ã€ bottomAnchor å’Œ centerXAnchor ç­‰æ–¹æ³•æ¥å®šä¹‰æ§ä»¶çš„ç›¸å¯¹ä½ç½®ã€‚

### 6.4 æ•°æ®ç»‘å®šUI

æ•°æ®ç»‘å®šæ˜¯å°†æ•°æ®æºç›´æ¥ç»‘å®šåˆ°UIå…ƒç´ ä¸Šï¼Œä»¥ä¾¿UIå¯ä»¥æ˜¾ç¤ºæœ€æ–°çš„æ•°æ®ã€‚è¿™åœ¨æ„å»ºåŠ¨æ€å†…å®¹æ—¶å°¤ä¸ºé‡è¦ã€‚åœ¨iOSä¸­ï¼Œé€šå¸¸é€šè¿‡æ•°æ®æºåè®®ï¼ˆä¾‹å¦‚UITableViewçš„æ•°æ®æºï¼‰æ¥å®ç°æ•°æ®ä¸UIçš„ç»‘å®šã€‚

ä»£ç å—æ¼”ç¤ºå¦‚ä½•å°†æ•°æ®ç»‘å®šåˆ°è¡¨æ ¼è§†å›¾ï¼ˆUITableViewï¼‰ï¼š

```
class MyViewController: UIViewController, UITableViewDelegate, UITableViewDataSource {
var dataArray = ["One", "Two", "Three"] // æ•°æ®æ•°ç»„
@IBOutlet weak var tableView: UITableView!

    // æ•°æ®æºæ–¹æ³•å®ç°
    func tableView(_ tableView: UITableView, numberOfRowsInSection section: Int) -> Int {
        return dataArray.count
    }
 
    func tableView(_ tableView: UITableView, cellForRowAt indexPath: IndexPath) -> UITableViewCell {
        let cell = tableView.dequeueReusableCell(withIdentifier: "MyCell", for: indexPath)
        cell.textLabel?.text = dataArray[indexPath.row] // æ•°æ®ç»‘å®šåˆ°cellçš„textLabel
        return cell
    }
    // åŠ¨æ€æ›´æ–°UIæ–¹æ³•ç¤ºä¾‹
    func updateUI() {
        dataArray.append("Four") // å‘æ•°æ®æ•°ç»„æ·»åŠ æ–°æ•°æ®
        tableView.reloadData() // é‡æ–°åŠ è½½è¡¨æ ¼è§†å›¾ï¼Œæ›´æ–°UI
    }
}

// åœ¨æŸå¤„è°ƒç”¨updateUIæ–¹æ³•
myViewController.updateUI()
```

åœ¨è¿™ä¸ªç®€å•çš„ä¾‹å­ä¸­ï¼Œ dataArray å˜é‡è¢«è®¾ç½®ä¸ºåŒ…å«å‡ ä¸ªå­—ç¬¦ä¸²çš„æ•°ç»„ï¼Œè¿™ä¸ªæ•°ç»„å……å½“æ•°æ®æºã€‚ tableView(_:cellForRowAt:) æ–¹æ³•ä¸­çš„ dataArray[indexPath.row] å°†æ•°ç»„ä¸­çš„å­—ç¬¦ä¸²ç›´æ¥ç»‘å®šåˆ°è¡¨æ ¼è§†å›¾å•å…ƒæ ¼çš„ textLabel å±æ€§ä¸Šã€‚

é€šè¿‡è°ƒç”¨ tableView.reloadData() ï¼Œå½“æ•°æ®æºå‘ç”Ÿå˜åŒ–æ—¶ï¼Œè¡¨æ ¼è§†å›¾å°†åˆ·æ–°å…¶å†…å®¹ï¼Œæ˜¾ç¤ºæœ€æ–°çš„æ•°æ®ã€‚è¿™æ˜¯ä¸€ä¸ªå¸¸è§çš„åŠ¨æ€æ›´æ–°ç”¨æˆ·ç•Œé¢çš„ç­–ç•¥ã€‚

## 07.æ‰‹åŠ¿è¯†åˆ«å™¨åº”ç”¨
### 7.1 æ‰‹åŠ¿è¯†åˆ«å™¨çš„ç±»å‹

æ‰‹åŠ¿è¯†åˆ«å™¨ï¼ˆGesture Recognizerï¼‰æ˜¯iOSå¼€å‘ä¸­çš„é‡è¦ç»„ä»¶ï¼Œç”¨äºæ•æ‰ç”¨æˆ·çš„è§¦æ‘¸æ‰‹åŠ¿ï¼Œå¹¶å°†å…¶è½¬æ¢æˆå¯è¯†åˆ«çš„åŠ¨ä½œã€‚

å¸¸è§çš„æ‰‹åŠ¿è¯†åˆ«å™¨ç±»å‹åŒ…æ‹¬ 

1. UITapGestureRecognizer ï¼ˆè½»å‡»ï¼‰
2. UIPinchGestureRecognizer ï¼ˆæåˆï¼‰
3. UIRotationGestureRecognizer ï¼ˆæ—‹è½¬ï¼‰
4. UISwipeGestureRecognizer ï¼ˆæ»‘åŠ¨ï¼‰
5. UILongPressGestureRecognizer ï¼ˆé•¿æŒ‰ï¼‰

æ¯ç§æ‰‹åŠ¿è¯†åˆ«å™¨éƒ½æœ‰å…¶ç‰¹å®šçš„ä½¿ç”¨åœºæ™¯ã€‚ä¾‹å¦‚ï¼ŒUITapGestureRecognizer é€‚ç”¨äºæŒ‰é’®ç‚¹å‡»ï¼Œè€Œ UIPinchGestureRecognizer é€‚åˆäºå®ç°å›¾ç‰‡çš„ç¼©æ”¾åŠŸèƒ½ã€‚UISwipeGestureRecognizer å¯ç”¨äºå·¦å³æ»‘åŠ¨é¡µé¢æµè§ˆï¼Œ UIRotationGestureRecognizer é€‚ç”¨äºæ—‹è½¬æ“ä½œï¼Œè€Œ UILongPressGestureRecognizer åˆ™ç”¨äºæ£€æµ‹é•¿æŒ‰äº‹ä»¶ã€‚

### 7.2 æ‰‹åŠ¿ä¸è§†å›¾äº¤äº’

åœ¨è§†å›¾æ§åˆ¶å™¨ä¸­ä½¿ç”¨æ‰‹åŠ¿è¯†åˆ«å™¨ï¼Œéœ€è¦åœ¨ viewDidLoad æ–¹æ³•ä¸­åˆ›å»ºå¹¶é…ç½®æ‰‹åŠ¿è¯†åˆ«å™¨ï¼Œç„¶åå°†å…¶æ·»åŠ åˆ°è§†å›¾ä¸­ã€‚ä»¥ä¸‹æ˜¯æ·»åŠ è½»å‡»æ‰‹åŠ¿è¯†åˆ«å™¨çš„ç¤ºä¾‹ä»£ç ï¼š

```
override func viewDidLoad() {
    super.viewDidLoad()
    // åˆ›å»ºè½»å‡»æ‰‹åŠ¿è¯†åˆ«å™¨
    let tapRecognizer = UITapGestureRecognizer(target: self, action: #selector(handleTap(_:)))
    // é…ç½®æ‰‹åŠ¿è¯†åˆ«å™¨çš„å±æ€§ï¼ˆå¯é€‰ï¼‰
    tapRecognizer.numberOfTapsRequired = 1
    // å°†æ‰‹åŠ¿è¯†åˆ«å™¨æ·»åŠ åˆ°è§†å›¾ä¸­
    self.view.addGestureRecognizer(tapRecognizer)
}

@objc func handleTap(_ sender: UITapGestureRecognizer) {
    if sender.state == .began {
        print("è½»å‡»æ‰‹åŠ¿è¯†åˆ«æˆåŠŸ")
        // å¤„ç†è½»å‡»äº‹ä»¶çš„å…·ä½“é€»è¾‘
    }
}
```
æ‰‹åŠ¿è¯†åˆ«å™¨å¯ä»¥ä¸è§†å›¾æ§åˆ¶å™¨ä¸­çš„å…¶ä»–UIå…ƒç´ äº¤äº’ï¼Œä¾‹å¦‚ï¼Œå¯ä»¥ç¦ç”¨æŒ‰é’®çš„é»˜è®¤ç‚¹å‡»äº‹ä»¶ï¼Œæ”¹ä¸ºä½¿ç”¨æ‰‹åŠ¿è¯†åˆ«å™¨æ¥æ§åˆ¶ã€‚

## 08.æ§åˆ¶å™¨é«˜çº§åº”ç”¨

### 8.1 æ¨¡æ€å±•ç¤ºä¸è§£é™¤

æ¨¡æ€è§†å›¾æ§åˆ¶å™¨çš„å‘ˆç°ä¸è§£é™¤ã€‚æ¨¡æ€å±•ç¤ºï¼ˆModal Presentationï¼‰æ˜¯iOSä¸­ä¸€ç§å¸¸è§çš„è§†å›¾å±•ç¤ºæ–¹å¼ï¼Œç”¨äºåœ¨å½“å‰è§†å›¾ä¸Šä¸´æ—¶å±•ç¤ºå¦ä¸€ä¸ªè§†å›¾ã€‚æ¨¡æ€è§†å›¾çš„å±•ç¤ºå’Œè§£é™¤é€šå¸¸æ¶‰åŠ present(_:animated:completion:) å’Œ dismiss(animated:completion:) æ–¹æ³•ã€‚

```
// å±•ç¤ºæ¨¡æ€è§†å›¾æ§åˆ¶å™¨
let modalViewController = ModalViewController()
self.present(modalViewController, animated: true, completion: nil)
 
// è§£é™¤æ¨¡æ€è§†å›¾æ§åˆ¶å™¨
modalViewController.dismiss(animated: true, completion: {
    print("æ¨¡æ€è§†å›¾æ§åˆ¶å™¨å·²è§£é™¤")
})
```

æ¨¡æ€è½¬æ¢åŠ¨ç”»ä¸æ— åŠ¨ç”»çš„åˆ‡æ¢ã€‚iOSä¸ºæ¨¡æ€å±•ç¤ºæä¾›äº†å¤šç§åŠ¨ç”»æ ·å¼ï¼Œä¾‹å¦‚ UIModalTransitionStyle.flipHorizontal ï¼ˆç¿»è½¬ï¼‰ã€ UIModalTransitionStyle.coverVertical ï¼ˆè¦†ç›–ï¼‰ç­‰ã€‚å¼€å‘è€…å¯ä»¥é€šè¿‡è®¾ç½® modalPresentationStyle å±æ€§æ¥é€‰æ‹©ä¸åŒçš„å±•ç¤ºåŠ¨ç”»ã€‚

è‹¥éœ€è¦æ— åŠ¨ç”»åœ°åˆ‡æ¢è§†å›¾æ§åˆ¶å™¨ï¼Œå¯ä»¥å°†åŠ¨ç”»å‚æ•°è®¾ç½®ä¸º false ã€‚

```
// æ— åŠ¨ç”»å‘ˆç°æ¨¡æ€è§†å›¾æ§åˆ¶å™¨
self.present(modalViewController, animated: false, completion: nil)

// æ— åŠ¨ç”»è§£é™¤æ¨¡æ€è§†å›¾æ§åˆ¶å™¨
modalViewController.dismiss(animated: false, completion: nil)
```

### 8.2 è§†å›¾çŠ¶æ€ä¿å­˜ä¸æ¢å¤

è§†å›¾çŠ¶æ€çš„ä¿å­˜æ˜¯é€šè¿‡ UIViewController çš„ EncodeRestorableState å’Œ DecodeRestorableState åè®®å®ç°çš„ã€‚

åœ¨ viewWillDisappear æˆ– viewDidUnload æ–¹æ³•ä¸­ä¿å­˜çŠ¶æ€ï¼Œç„¶ååœ¨ viewDidLoad ä¸­æ¢å¤çŠ¶æ€ã€‚è¿™äº›æ–¹æ³•å…è®¸è§†å›¾æ§åˆ¶å™¨ä¿å­˜å’Œæ¢å¤å…¶è§†å›¾å±‚æ¬¡ç»“æ„å’ŒçŠ¶æ€ä¿¡æ¯ã€‚

```
override func viewWillDisappear(_ animated: Bool) {
    super.viewWillDisappear(animated)
    // ä¿å­˜è§†å›¾çŠ¶æ€
    UserDefaults.standard.set(self.view.frame, forKey: "viewFrame")
}
 
override func viewDidLoad() {
    super.viewDidLoad()
    // æ¢å¤è§†å›¾çŠ¶æ€
    if let viewFrame = UserDefaults.standard.object(forKey: "viewFrame") as? CGRect {
        self.view.frame = viewFrame
    }
}
```

åœ¨è§†å›¾æ§åˆ¶å™¨ç”Ÿå‘½å‘¨æœŸä¸­ï¼Œ viewWillAppear æ–¹æ³•æ˜¯åœ¨è§†å›¾å³å°†å±•ç¤ºä¹‹å‰è°ƒç”¨çš„ã€‚å¯ä»¥åœ¨è¿™ä¸ªæ–¹æ³•ä¸­åŠ è½½è§†å›¾çŠ¶æ€ï¼Œç¡®ä¿ç”¨æˆ·è¿”å›åˆ°è¯¥è§†å›¾æ§åˆ¶å™¨æ—¶ï¼Œçœ‹åˆ°çš„æ˜¯ä»–ä»¬ä¹‹å‰ç¦»å¼€æ—¶çš„çŠ¶æ€ã€‚

```
override func viewWillAppear(_ animated: Bool) {
    super.viewWillAppear(animated)
    // ç¡®ä¿è§†å›¾çŠ¶æ€æ¢å¤
    if let viewFrame = UserDefaults.standard.object(forKey: "viewFrame") as? CGRect {
        self.view.frame = viewFrame
    }
}
```

### 8.3 UINavigationController

UINavigationController æ˜¯ä¸€ä¸ªç®¡ç†è§†å›¾æ§åˆ¶å™¨å †æ ˆçš„æ§åˆ¶å™¨ï¼Œå®ƒæä¾›äº†è§†å›¾æ§åˆ¶å™¨ä¹‹é—´çš„å¯¼èˆªç®¡ç†ã€‚

åœ¨ä½¿ç”¨ UINavigationController æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ pushViewController(_:animated:) æ–¹æ³•æ¥æ¨é€æ–°çš„è§†å›¾æ§åˆ¶å™¨ï¼Œç”¨ popViewController(animated:) æ¥å¼¹å‡ºå½“å‰è§†å›¾æ§åˆ¶å™¨ã€‚

```
// æ¨é€æ–°çš„è§†å›¾æ§åˆ¶å™¨
let newViewController = NewViewController()
self.navigationController?.pushViewController(newViewController, animated: true)

// å¼¹å‡ºå½“å‰è§†å›¾æ§åˆ¶å™¨
if let navigationController = self.navigationController {
    navigationController.popViewController(animated: true)
}
```

åœ¨å¯¼èˆªæ§åˆ¶å™¨ä¸­ï¼Œè¿˜å¯ä»¥åˆ©ç”¨ setNavigationBarHidden(_:animated:) æ–¹æ³•æ¥éšè—æˆ–æ˜¾ç¤ºå¯¼èˆªæ ã€‚å¯¹äºå¤æ‚çš„å¯¼èˆªæµç¨‹ï¼Œå¯ä»¥åœ¨è§†å›¾æ§åˆ¶å™¨ä¹‹é—´å…±äº«æ•°æ®ï¼Œé€šè¿‡ prepare(for:sender:) æ–¹æ³•è¿›è¡Œè§†å›¾æ§åˆ¶å™¨è·³è½¬å‰çš„å‡†å¤‡å·¥ä½œã€‚

```
// éšè—å¯¼èˆªæ 
self.navigationController?.setNavigationBarHidden(true, animated: true)

// æ˜¾ç¤ºå¯¼èˆªæ 
self.navigationController?.setNavigationBarHidden(false, animated: true)
```

### 8.4 è§†å›¾åˆ‡æ¢åŠ¨ç”»ç¤ºä¾‹

æ— åŠ¨ç”»æ“ä½œçš„å®ç°ä»£ç ç¤ºä¾‹ã€‚é€šè¿‡è®¾ç½® animated å‚æ•°ä¸º false ï¼Œå¯ä»¥åœ¨æ¨é€æˆ–å¼¹å‡ºè§†å›¾æ§åˆ¶å™¨æ—¶ï¼Œå®ç°æ— åŠ¨ç”»çš„æ•ˆæœã€‚

```
// æ¨é€æ–°çš„è§†å›¾æ§åˆ¶å™¨ä½†ä¸æ˜¾ç¤ºåŠ¨ç”»
self.navigationController?.pushViewController(newViewController, animated: false)

// å¼¹å‡ºå½“å‰è§†å›¾æ§åˆ¶å™¨ä½†ä¸æ˜¾ç¤ºåŠ¨ç”»
if let navigationController = self.navigationController {
    navigationController.popViewController(animated: false)
}
```


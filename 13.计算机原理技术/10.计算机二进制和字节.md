# 10.计算机二进制和字节
#### 目录介绍
- 01.进制数据的由来
  - 1.1 先来看一个场景
  - 1.2 什么是进制
  - 1.3 进制设计背景
  - 1.4 数据传输用什么
- 02.为何选择二进制
  - 2.1 计算机为何不选十进制
  - 2.2 为何用二进制
  - 2.3 理解逢二进一
  - 2.4 十进制转二进制
- 03.位和字节设计思想
  - 3.1 位的设计
  - 3.2 字节的设计
  - 3.3 字符的设计
- 04.字符串的表示
  - 4.1 从编码到数字
  - 4.2 二进制存储空间
  - 4.3 字符集的由来
  - 4.4 乱码为何出现
- 05.有符号整数编码
  - 5.1 如何表示符号
  - 5.2 原码的设计意图
  - 5.3 反码的设计意图
  - 5.4 补码的设计意图
  - 5.5 正数和负数表达
- 06.数据二进制表示
  - 6.1 二进制表示方式
  - 6.2 二进制表达整数
  - 6.3 二进制表达浮点数
  - 6.4 二进制表达字符
  - 6.5 二进制表达图像
  - 6.6 二进制表达音频



## 01.进制数据的由来

### 1.1 先来看一个场景

遇到的乱码究竟是怎么回事儿。我们平时在开发的时候，所说的 Unicode 和 UTF-8 之间有什么关系。

### 1.2 什么是进制

进制：就是进位制，是人们规定的一种进位方法。对于任何一种进制--X进制，就表示某一位置上的数运算时是逢X进一位

1. 二进制就是逢二进一，二进制: 由0,1组成。
2. 八进制是逢八进一，八进制: 由0,1,…7组成。以数字“0”开头
3. 十进制是逢十进一，十进制: 由0,1,…9组成。整数默认是十进制的
4. 十六进制是逢十六进一，十六进制: 由0,1,…9,a,b,c,d,e,f(大小写均可)。以0x开头

### 1.3 进制设计背景

**二进制的由来**

二进制，并认为这是世界上数学进制中最先进的，20世纪被称作第三次科技革命的重要标志之一的计算机的发明与应用，其运算模式正是二进制。

**八进制的由来**

二进制早期由电信号开关演变而来。一个整数在内存中一样也是二进制的，但是使用一大串的1或者0组成的数值进行使用很麻烦。

所以就想把一大串缩短点，将二进制中的三位用一位表示。这三位可以取到的最大值就是7，超过7就进位了，这就是八进制。

**十进制的由来**

最早的计数系统是一种基于指头和手指的十进制系统，每个手指代表一个单位。然后，人们开始使用更大的物体，如石块或棍棒，来表示更大的数量。这导致了一种更广义的计数系统，其中每个物体代表一个单位。

**十六进制的由来**

对于过长的二进制变成八进制还是较长，所以出现的用4个二进制位表示一位的情况，四个二进制位最大是15，这就是十六进制。

### 1.4 二进制数据传输

计算机中使用二进制传输数据是因为计算机内部的处理和存储都是以二进制形式进行的。

二进制是一种只包含0和1两个数字的数制系统，与计算机内部的电子元件工作原理相匹配。

以下是一些原因说明为什么计算机使用二进制传输数据：

1. 简单和可靠：二进制只有两个状态，0和1，使得数据传输和处理更加简单和可靠。计算机内部的电子元件可以轻松地识别和处理这两个状态。
2. 容易实现：计算机内部的逻辑门电路（如与门、或门、非门等）可以直接使用二进制信号进行操作。这样，计算机的设计和实现变得更加简单和高效。
3. 兼容性：二进制是一种通用的数制系统，可以表示和处理各种类型的数据，包括数字、文本、图像、音频等。通过使用二进制传输数据，计算机可以处理和存储各种不同类型的信息。
4. 可扩展性：二进制的位表示形式可以轻松地扩展到更高的位数，以适应更大范围的数值和数据。这使得计算机可以处理和存储非常大的数据量。
5. 效率和速度：二进制的传输和处理速度通常比其他数制系统更快。这是因为计算机内部的电子元件可以更快地切换和处理二进制信号。

## 02.为何选择二进制
### 2.1 计算机为何不选十进制

电报机只有一个按钮，按下就是输入信号，按的时间短一点，就是发出了一个“点”信号；按的时间长一些，就是一个“划”信号。只要一个手指，就能快速发送电报。

制造一台电报机也非常容易。电报机本质上就是一个“蜂鸣器 + 长长的电线 + 按钮开关”。

蜂鸣器装在接收方手里，开关留在发送方手里。双方用长长的电线连在一起。当按钮开关按下的时候，电线的电路接通了，蜂鸣器就会响。

短促地按下，就是一个短促的点信号；按的时间稍微长一些，就是一个稍长的划信号。

### 2.2 为何用二进制

计算机使用二进制是因为电子元件更容易表示和处理二进制信号。以下是计算机使用二进制的主要原因：

简单性：二进制是一种非常简单的进制系统，只有两个数字0和1。计算机内部的电子元件（如晶体管）可以通过开关的状态（开或关）来表示0和1，这种二元性质使得电子电路设计更简单。

可靠性：二进制系统更可靠，因为它只有两个状态，减少了数字的模糊性和误差。在电子电路中，判断高电平和低电平（1和0）更容易和准确，而十进制系统则需要更复杂的电路来表示和处理多个状态。

空间效率：二进制数据占用的存储空间更少。由于计算机内部使用二进制表示数据，使用更少的位数就可以表示相同的数值范围。这对于存储和传输数据来说是非常重要的。

兼容性：二进制与计算机内部的逻辑门电路和处理器指令集密切相关。计算机的处理器和其他硬件组件都是基于二进制操作的，因此使用二进制更符合计算机体系结构的设计。

### 2.3 理解逢二进一

二进制和我们平时用的十进制，其实并没有什么本质区别，只是平时我们是“逢十进一”，这里变成了“逢二进一”而已。

每一位，相比于十进制下的 0～9 这十个数字，我们只能用 0 和 1 这两个数字。

任何一个十进制的整数，都能通过二进制表示出来。

把一个二进制数，对应到十进制，非常简单，就是把从右到左的第 N 位，乘上一个 2 的 N 次方，然后加起来，就变成了一个十进制数。

当然，既然二进制是一个面向程序员的“语言”，这个从右到左的位置，自然是从 0 开始的。

比如 0011 这个二进制数，对应的十进制表示

就是 0*2^{3} + 0*2^{2} + 1*2^{1} + 1*2^{0}= 3，代表十进制的 3。


### 2.4 十进制转二进制

把一个十进制的数，转化成二进制，使用短除法就可以。

也就是，把十进制数除以 2 的余数，作为最右边的一位。然后用商继续除以 2，把对应的余数紧靠着刚才余数的右侧，这样递归迭代，直到商为 0 就可以了。

比如，我们想把 13 这个十进制数，用短除法转化成二进制，需要经历以下几个步骤：

因此，对应的二进制数，就是 1101。

```text
       商    余数   二进制位
13/2   6      1      1
6/2    3      0      0
3/2    1      1      1
1/2    0      1      1
```

## 03.位和字节设计思想
### 3.1 位的设计

位:"位(bit)"是电子计算机中最小的数据单位。

1. 二进制数据中，每一位的状态只能是0或1。
2. 八进制数据中，每一位的状态只能是0,1,…9。
3. 十六进制数据中，每一位的状态只能是0,1,…9,a,b,c,d,e,f(大小写均可)。

不同进制的转化

1. 每1个八进制位对应2个二进制位。01 ——> 0001
2. 每1个十六进制位对应4个二进制位。OX01 ——> 0000 0001

### 3.2 字节的设计

字节：8个二进制位构成1个"字节(Byte)"，它是存储空间的基本计量单位。

一个字节（byte）由8个二进制位（bits）组成。

1. 每个二进制位可以表示0或1两个状态。
2. 因此，一个字节可以表示256（2的8次方）个不同的值，范围从0到255。

一个字节（byte）可以表示为2个十六进制位。

1. 每个十六进制位可以是0-9的数字（0-9）或A-F的字母（10-15），共16个可能的值。
2. 因此，一个字节的十六进制表示范围是00到FF。其中，00表示0，FF表示255。


### 3.3 字符的设计

一个字符（char）由16个二进制位（bits）组成。

- 每个二进制位可以表示0或1两个状态。
- 一个字符的二进制表示范围是0000000000000000到1111111111111111。其中，0000000000000000表示0，1111111111111111表示65535。

一个字符（char）占用2个字节（16位）。

Java使用Unicode字符编码，其中每个字符都用16位表示。Java的char类型是无符号的，范围从0到65535（0x0000到0xFFFF）。

一个字符（char）可以表示为4个十六进制位。

- 每个十六进制位可以是0-9的数字（0-9）或A-F的字母（10-15），共16个可能的值。
- 一个字符的十六进制表示范围是0000到FFFF。其中，0000表示0，FFFF表示65535。

设计字符（char）的主要原因是为了表示和处理文本数据。以下是一些原因：

1. 文本表示&处理：字符用于表示文本中的字母、数字、符号和其他可打印字符。通过字符，可以方便地处理和操作文本数据。
2. 字符编码：字符在计算机系统中使用字符编码来表示。常见的字符编码方案如ASCII、Unicode等，它们将字符映射到数字值，使得计算机能够处理和存储文本数据。
3. 字符串操作：字符是构建字符串（String）的基本单位。字符串是一系列字符的集合，用于表示和处理更复杂的文本数据。

## 04.字符串的表示
### 4.1 从编码到数字

不仅数值可以用二进制表示，字符乃至更多的信息都能用二进制表示。

最典型的例子就是字符串（Character String）。最早计算机只需要使用英文字符，加上数字和一些特殊符号，然后用 8 位的二进制，就能表示我们日常需要的所有字符了，这个就是我们常常说的 ASCII 码。

ASCII 码就好比一个字典，用 8 位二进制中的 128 个不同的数，映射到 128 个不同的字符里。

1. 比如，小写字母 a 在 ASCII 里面，就是第 97 个，也就是二进制的 0110 0001，对应的十六进制表示就是 61。
2. 比如，大写字母 A，就是第 65 个，也就是二进制的 0100 0001，对应的十六进制表示就是 41。
3. 比如，在 ASCII 码里面，数字 9 不再像整数表示法里一样，用 0000 1001 来表示，而是用 0011 1001 来表示。
4. 比如，字符串 15 也不是用 0000 1111 这 8 位来表示，而是变成两个字符 1 和 5 连续放在一起，也就是 0011 0001 和 0011 0101，需要用两个 8 位来表示。

### 4.2 二进制存储空间

最大的 32 位整数，就是 2147483647。

如果用整数表示法，只需要 32 位就能表示了。但是如果用字符串来表示，一共有 10 个字符，每个字符用 8 位的话，需要整整 80 位。比起整数表示法，要多占很多空间。

这也是为什么，很多时候我们在存储数据的时候，要采用二进制序列化这样的方式，而不是简单地把数据通过JSON，这样的文本格式存储来进行序列化。

不管是整数也好，浮点数也好，采用二进制序列化会比存储文本省下不少空间。

### 4.3 字符集的由来

字符集的由来主要是为了增加计算机字符的表示

ASCII 码只表示了 128 个字符，一开始倒也堪用，毕竟计算机是在美国发明的。

然而随着越来越多的不同国家的人都用上了计算机，想要表示譬如中文这样的文字，128 个字符显然是不太够用的。

于是，计算机工程师们开始各显神通，给自己国家的语言创建了对应的字符集（Charset）和字符编码（Character Encoding）。

字符集，表示的可以是字符的一个集合。

比如“中文”就是一个字符集，不过这样描述一个字符集并不准确。

想要更精确一点，我们可以说，“第一版《新华字典》里面出现的所有汉字”，这是一个字符集。

这样，我们才能明确知道，一个字符在不在这个集合里面。比如，我们日常说的 Unicode，其实就是一个字符集，包含了 150 种语言的 14 万个不同的字符。

字符编码则是对于字符集里的这些字符，怎么一一用二进制表示出来的一个字典。

Unicode，就可以用 UTF-8、UTF-16，乃至 UTF-32 来进行编码，存储成二进制。

所以，有了 Unicode，其实我们可以用不止 UTF-8 一种编码形式，我们也可以自己发明一套 GT-32 编码，比如就叫作 Geek Time 32 好了。只要别人知道这套编码规则，就可以正常传输、显示这段代码。

### 4.4 乱码为何出现

同样的文本，采用不同的编码存储下来。如果另外一个程序，用一种不同的编码方式来进行解码和展示，就会出现乱码。
这就好像两个军队用密语通信，如果用错了密码本，那看到的消息就会不知所云。
来看一个乱码的案例

在中文世界里，最典型的就是“手持两把锟斤拷，口中疾呼烫烫烫”的典故。
既然今天要彻底搞清楚编码知识，我们就来弄清楚“锟斤拷”和“烫烫烫”的来龙去脉。
首先，“锟斤拷”的来源是这样的。
如果我们想要用 Unicode 编码记录一些文本，特别是一些遗留的老字符集内的文本，但是这些字符在 Unicode 中可能并不存在。
于是，Unicode 会统一把这些字符记录为 U+FFFD 这个编码。如果用 UTF-8 的格式存储下来，就是\xef\xbf\xbd。
如果连续两个这样的字符放在一起，\xef\xbf\xbd\xef\xbf\xbd，这个时候，如果程序把这个字符，用 GB2312 的方式进行 decode，就会变成“锟斤拷”。
这就好比我们用 GB2312 这本密码本，去解密别人用 UTF-8 加密的信息，自然没办法读出有用的信息。
而“烫烫烫”，则是因为如果你用了 Visual Studio 的调试器，默认使用 MBCS 字符集。
“烫”在里面是由 0xCCCC 来表示的，而 0xCC 又恰好是未初始化的内存的赋值。于是，在读到没有赋值的内存地址或者变量的时候，电脑就开始大叫“烫烫烫”了。


## 05.有符号整数编码
### 5.1 如何表示符号

在计算机中，使用二进制表示数据是最为常见的方式。对于无符号整数，直接使用二进制表示即可。但对于有符号整数，需要一种方法来表示正负号。那么该如何设计呢？

### 5.2 原码的设计意图

设计意图：原码是最简单的表示方法，其中最高位表示符号位，0表示正数，1表示负数。

存在的问题：原码的问题在于加法和减法运算比较复杂，需要额外的处理。

如何理解原码中加减法比较复杂：在进行加法和减法运算时，需要对符号位进行特殊处理。进位的处理也是原码加法和减法复杂性的一个因素。

1. 加法运算增加了复杂性：对于两个原码表示的数相加，首先要判断符号位是否相同。如果符号位相同，直接将各位相加即可，最后的结果的符号位与原数相同。如果符号位不同，需要进行额外的处理。首先，将两个数的绝对值相加，然后根据符号位确定结果的符号位。如果两个数的符号位不同，结果为负数，需要在最后的结果上加上一个负号。
2. 进位的处理也是原码加法和减法复杂性的一个因素。在原码加法中，如果最高位的进位产生了，需要将进位位添加到结果中。而在原码减法中，如果最高位的借位产生了，需要将借位位添加到结果中。

### 5.3 反码的设计意图

反码设计意图：为了解决原码的问题，反码被引入。反码的表示方法是，对于正数，与原码相同；对于负数，符号位不变，其余位按位取反。

对比原码它的优势：减法运算可以转换为加法运算，简化了运算过程。

存在的问题：反码的问题在于存在两个零的表示，即正零和负零。

如何理解反码存在两个零的问题：

### 5.4 补码的设计意图

补码设计意图：为了解决反码的问题，补码被引入。补码的表示方法是，对于正数，与原码相同；对于负数，符号位不变，其余位按位取反，然后加1。

补码的优势：在于只有一个零的表示，同时简化了加法和减法运算。补码也可以通过减法运算得到负数的补码表示。

补码的设计背景是为了简化计算机中的运算操作，特别是加法和减法。它在硬件电路中的实现更加高效，同时也提供了一种统一的表示方法，使得计算机可以使用相同的算术逻辑来处理无符号和有符号整数。

### 5.5 正数和负数表达

正数表示法，假设机器字长(处理的位数为8位)，数字:1 原码,反码,补码

- 原码:00000001
- 反码:00000001
- 补码:00000001

负数表示法，数字:-1 原码，反码，补码

- 原码：符号位为1其余各位不变 1000 0001
- 反码：符号位不变，其余各位取反 1111 1110
- 补码：符号位不变，其位各位取反后加1（对补码取反加1 得到原码） 1111 1111

## 06.数据二进制表示

### 6.1 二进制表示方式


### 6.2 二进制表达整数


### 6.3 二进制表达浮点数


### 6.4 二进制表达字符


### 6.5 二进制表达图像


### 6.6 二进制表达音频


